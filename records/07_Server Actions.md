## ✅ Server Actions 란?

Server Actions는 Next.js 애플리케이션에서 **폼 제출 및 데이터 변조를 처리하기 위해 서버에서 실행되는 비동기 함수**이다. 이러한 함수는 서버 및 클라이언트 컴포넌트 모두에서 호출될 수 있다.

Server Actions를 사용하면 **클라이언트와 서버 간의 복잡한 데이터 요청 흐름을 단순화**할 수 있다. 이를 통해 서버에서 처리해야할 작업들을 클라이언트 코드에서 분리하고, 클라이언트에서 서버 함수를 간편하게 호출할 수 있다.

<br>
<hr>

## ✅ Server Actions를 사용하는 이유

### ✔️ 기존 API 호출 방식과의 비교

Server Actions는 Next.js 15에서 도입된 기능으로, 서버에서 실행되는 비동기 함수이다. React에서 API 호출을 통해 서버와 데이터를 주고받던 기존 방식과 비교하면, Server Actions는 데이터 요청 및 변조 흐름을 보다 단순하게 만들 수 있다. 이를 통해 개발자가 서버와 클라이언트 간의 데이터 전달 방식에서 불필요한 복잡성을 줄이고, 보안과 성능을 개선할 수 있다.

### ✔️ 기존 API 호출 방식의 문제점

**1. 불필요한 네트워크 요청**

-   `useEffect`를 사용할 경우, 클라이언트에서 초기 렌더링 시 불필요한 네트워크 요청이 발생할 수 있음.
-   특히, SSR(Server-Side Rendering) 환경에서 서버에서 이미 데이터를 가져왔음에도 클라이언트에서 다시 요청하는 문제가 발생할 수 있음.

**2. 상태 관리의 복잡성 증가**

-   API 응답 데이터를 `useState`에 저장하고, 이를 기반으로 UI를 갱신해야 함.
-   캐싱, 비동기 처리, 에러 핸들링 등을 추가로 고려해야 하므로 코드가 복잡해짐.
-   `react-query`와 같은 별도의 라이브러리를 도입해야 할 수도 있음.

**3. 보안 취약점**

-   클라이언트에서 API를 직접 호출하는 경우, API 엔드포인트가 브라우저에 노출됨.
-   API 요청을 가로채거나 변조할 위험이 있으며, 인증 및 권한 관리를 강화해야 함.

**4. 폼 제출 후 리디렉션 처리의 어려움**

-   기존 방식에서는 폼을 제출한 후 상태를 업데이트하고, `router.push` 등을 이용해 다른 페이지로 이동해야 함.
-   클라이언트와 서버 간 상태 동기화가 필요해 복잡성이 증가함.

### ✔️ Server Actions를 사용하는 이유

Server Actions를 활용하면 위와 같은 문제점을 해결하고, 보다 직관적인 데이터 요청 흐름을 구현할 수 있다.

**1. 네트워크 요청 최소화**

-   클라이언트에서 직접 API를 호출하지 않고, 서버에서 필요한 데이터를 즉시 처리하여 반환함.
-   서버 컴포넌트 내에서 실행되므로, 불필요한 네트워크 왕복을 줄이고 성능을 개선할 수 있음.

**2. 상태 관리 간소화**

-   `useState`나 `useEffect` 없이 Server Actions에서 데이터를 직접 처리할 수 있음.
-   `react-query` 같은 상태 관리 라이브러리 없이도 비즈니스 로직을 서버에서 직접 실행할 수 있음.

**3. 보안 강화**

-   API 엔드포인트가 브라우저에서 노출되지 않으므로, 클라이언트에서 직접 호출할 수 없음.
-   중요한 로직을 클라이언트에서 실행하는 대신, 서버에서 실행하여 보안성을 높일 수 있음.

**4. 직관적인 데이터 요청 흐름**

-   Server Actions는 `use server` 지시어를 사용하여 함수 내에서 서버에서 실행됨.
-   데이터를 받아오는 과정이 더욱 직관적이며, 불필요한 코드가 줄어듦.

**5. 폼 제출과 리디렉션을 간편하게 처리**

-   Server Actions는 폼의 `action` 속성에 직접 사용할 수 있어, `onSubmit` 이벤트 핸들러를 별도로 정의할 필요 없음.
-   폼 제출 후 자동으로 서버에서 데이터가 처리되며, 리디렉션을 쉽게 적용할 수 있음.

```tsx
async function submitForm(formData: FormData) {
    'use server';
    // 데이터 저장 및 리디렉션
    redirect('/success');
}

return <form action={submitForm}>...</form>;
```

<br>
<hr>
